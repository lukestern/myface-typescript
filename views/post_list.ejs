<html lang="en-gb">
<%- include('_head') -%>
<%- include('_header') -%>
<body>
<h1>Posts</h1>
<ul>
    <% results.forEach(function(post) {%>
        <li>
            <h2><%= post.message %></h2>
            <p>
                <time datetime="YYYY-MM-DD HH:MM:SS"><%= post.createdAt %></time>
                <%= post.postedBy.username %>
            </p>
            <img src=<%= post.imageUrl %> alt=""/>
            <p>
                👍: <%= post.likedBy.length %> 👎: <%= post.dislikedBy.length %>
            </p>  
            <%if (post.likedBy.filter(user => user.id === 1).length === 0 
                  && post.dislikedBy.filter(user => user.id === 1).length === 0) { %>
                <form action="/posts/<%= post.id %>/like/" method="post">
                    <button type="submit">👍</button>
                </form>
                <form action="/posts/<%= post.id %>/dislike/" method="post">
                    <button type="submit">👎</button>
                </form>
            <% } %>
        </li>
    <% }); %>
</ul>
<%if (previous) { %>
    <a href="<%= previous %>">Previous</a>
<% } %>
<%if (next) { %>
    <a href="<%= next %>">Next</a>
<% } %>
</body>
<%- include('_footer') -%>
</html>